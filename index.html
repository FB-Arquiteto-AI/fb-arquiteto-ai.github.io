<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TERRA 2 - MODO LIVRE</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; }
        #ui { position: absolute; top: 10px; left: 10px; color: gold; z-index: 100; pointer-events: none; }
        .controles { 
            position: absolute; bottom: 20px; width: 100%; 
            display: flex; justify-content: space-around; z-index: 100;
        }
        .btn { 
            width: 70px; height: 70px; background: rgba(255,215,0,0.3); 
            border: 2px solid gold; border-radius: 50%; color: gold;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="ui"><h2>TERRA 2: EXPLORAÇÃO</h2><p>VÔO E MOVIMENTO ATIVOS</p></div>
    
    <div class="controles">
        <div class="btn" id="subir">SOBE</div>
        <div class="btn" id="frente">FRENTE</div>
        <div class="btn" id="descer">DESCE</div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000510);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Luz e Chão
        scene.add(new THREE.AmbientLight(0xffffff, 0.7));
        const grid = new THREE.GridHelper(1000, 100, 0xffd700, 0x111111);
        scene.add(grid);

        // Criar Prédios com "Portas"
        function createBuilding(x, z) {
            const h = Math.random() * 20 + 5;
            const geo = new THREE.BoxGeometry(4, h, 4);
            const mat = new THREE.MeshPhongMaterial({ color: 0x000000, emissive: 0xffd700, emissiveIntensity: 0.1 });
            const b = new THREE.Mesh(geo, mat);
            b.position.set(x, h/2, z);
            scene.add(b);
        }

        for(let i=0; i<50; i++) {
            createBuilding((Math.random()-0.5)*100, (Math.random()-0.5)*100);
        }

        camera.position.set(0, 5, 10);

        let move = { f: false, u: false, d: false };
        document.getElementById('frente').ontouchstart = () => move.f = true;
        document.getElementById('frente').ontouchend = () => move.f = false;
        document.getElementById('subir').ontouchstart = () => move.u = true;
        document.getElementById('subir').ontouchend = () => move.u = false;
        document.getElementById('descer').ontouchstart = () => move.d = true;
        document.getElementById('descer').ontouchend = () => move.d = false;

        function animate() {
            requestAnimationFrame(animate);
            if(move.f) camera.translateZ(-0.5);
            if(move.u) camera.position.y += 0.3;
            if(move.d && camera.position.y > 1) camera.position.y -= 0.3;
            
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>

